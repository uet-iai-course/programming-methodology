<!doctype html>
<html lang="vi">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <title>Bài 2a: Cú pháp, ngữ nghĩa, tên và phạm vi</title>

  <link rel="stylesheet" href="revealjs/dist/reset.css" />
  <link rel="stylesheet" href="revealjs/dist/reveal.css" />
  <link rel="stylesheet" href="revealjs/dist/theme/white.css" />
  <link rel="stylesheet" href="plugin/highlight/monokai.css" />
  <link rel="stylesheet" href="lecture-style.css" />

  <style>
    /* Optional: tiny helpers to keep diagrams readable */
    .mini {
      font-size: 0.85em;
    }

    .diagram-row {
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 1rem;
      flex-wrap: wrap;
    }

    .box {
      border: 2px solid #1E93AB;
      padding: 0.6rem 1rem;
      border-radius: 10px;
      background: rgba(30, 147, 171, 0.05);
    }

    .box-gray {
      border: 2px solid #666;
      padding: 0.6rem 1rem;
      border-radius: 10px;
      background: rgba(0, 0, 0, 0.03);
    }

    .box-red {
      border: 2px solid #E62727;
      padding: 0.6rem 1rem;
      border-radius: 10px;
      background: rgba(230, 39, 39, 0.05);
    }

    .pill {
      display: inline-block;
      padding: 0.1rem 0.5rem;
      border-radius: 999px;
      border: 1px solid #ccc;
      font-size: 0.85em;
    }

    .two-col {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 1rem;
    }

    .question-box {
      border-left: 6px solid #1E93AB;
      background: rgba(30, 147, 171, 0.07);
      padding: 0.8rem 1rem;
      border-radius: 10px;
    }

    .question-title {
      font-weight: 700;
      margin-bottom: 0.35rem;
    }

    .keyword {
      font-weight: 700;
      color: #1E93AB;
    }

    .inline-code {
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      background: rgba(0, 0, 0, 0.06);
      padding: 0.1rem 0.35rem;
      border-radius: 6px;
    }

    table {
      font-size: 0.9em;
    }
  </style>
</head>

<body>
  <div class="reveal">
    <div class="slides">

      <!-- =========================
                TRANG BÌA + MỤC LỤC
            ========================== -->
      <section>
        <section>
          <h1>Phương pháp luận lập trình</h1>
          <h3>Bài 2a: Cú pháp, ngữ nghĩa, tên và phạm vi</h3>
          <p>Trường ĐH Công nghệ – Đại học Quốc gia Hà Nội</p>
        </section>

        <section>
          <h2>Nội dung</h2>
          <ol>
            <li>Mô tả ngôn ngữ lập trình</li>
            <li>Ngữ nghĩa và Cài đặt</li>
            <li>Tên, Đối tượng được biểu thị và Khối</li>
            <li>Môi trường và Phạm vi</li>
          </ol>
        </section>

        <section>
          <h2>Mục tiêu buổi học</h2>
          <ul>
            <li>Nắm bắt cách mô tả ngôn ngữ lập trình: từ vựng, cú pháp, ngữ pháp; văn phạm phi ngữ cảnh
              (CFG), BNF</li>
            <li>Phân tích ngữ nghĩa và cài đặt: ngữ nghĩa tĩnh/động, biên dịch, máy trừu tượng</li>
            <li>Nắm được tên, đối tượng được biểu thị và khối; các cơ chế che khuất và bí danh</li>
            <li>Phân biệt môi trường và quy tắc phạm vi; so sánh phạm vi tĩnh và phạm vi động</li>

        </section>
      </section>

      <!-- ==========================================================
                1) CÁC MỨC MÔ TẢ NGÔN NGỮ VÀ BIỂU DIỄN NGÔN NGỮ
            =========================================================== -->
      <section>
        <section>
          <h1>
            <span class="text-light">1.</span><br />
            Mô tả ngôn ngữ lập trình
          </h1>
        </section>

        <section>
          <h2>Các mức mô tả ngôn ngữ</h2>
          <div class="diagram-row mini">
            <div class="box"><b>Ngữ pháp (Grammar)</b><br />“Chuỗi nào hợp lệ?”</div>
            <div class="box"><b>Ngữ nghĩa (Semantics)</b><br />“Câu hợp lệ có nghĩa gì?”</div>
            <div class="box-gray"><b>Ngữ dụng (Pragmatics)</b><br />“Dùng thế nào là tốt?”</div>
            <div class="box-gray"><b>Cài đặt (Implementation)</b><br />“Thực thi ra sao?”</div>
          </div>
        </section>

        <section>
          <h2>Ví dụ: Công thức nấu ăn</h2>
          <ul>
            <li><strong>Ngữ pháp</strong>: “câu nào là hợp lệ” trong công thức</li>
            <li><strong>Ngữ nghĩa</strong>: món ăn thu được tương ứng công thức</li>
            <li><strong>Ngữ dụng</strong>: mẹo nấu, cách trình bày, lựa chọn nguyên liệu</li>
            <li><strong>Cài đặt</strong>: bếp, dụng cụ, quy trình cụ thể để thực thi</li>
          </ul>
          </p>
        </section>

        <section>
          <h2>Từ vựng và Cú pháp</h2>
          <div class="two-col">
            <div class="box-gray">
              <b>Từ vựng (Lexicon)</b>
              <ul class="mini">
                <li>Các từ cơ bản: từ khóa, toán tử, số, định danh...</li>
                <li>Ví dụ: bảng chữ cái tiếng việt có 29 chữ cái, có thể tạo thành các từ ('tôi', 'học',
                  'lập trình')
                </li>
              </ul>
            </div>
            <div class="box-gray">
              <b>Cú pháp (Syntax)</b>
              <ul class="mini">
                <li>Ghép token thành cấu trúc hợp lệ (câu/chương trình)</li>
                <li>Ghép các từ tạo thành câu, phải có chủ ngữ vị ngữ ('tôi học lập trình')</li>
              </ul>
            </div>
          </div>
        </section>

        <section>
          <h2>Ngữ pháp là gì?</h2>
          <ul>
            <li>Ngữ pháp = toàn bộ hệ thống quy tắc của ngôn ngữ</li>
            <li>Bao gồm: từ vựng + cú pháp</li>
          </ul>
          <div class="question-box">
            <div class="question-title">Ví dụ nhanh</div>
            <ul class="mini" style="margin:0.2rem 0 0 1.1rem;">
              <li>Từ vựng: <span class="inline-code">if</span>, <span class="inline-code">else</span>,
                <span class="inline-code">identifier</span>, <span class="inline-code">number</span>,
                <span class="inline-code">+</span>, <span class="inline-code">;</span> ...
              </li>
              <li>Cú pháp: <span class="inline-code">if (E) S else S</span>, <span class="inline-code">S →
                  S ; S</span> ...</li>
            </ul>
          </div>
          <ul>
            <li>Công cụ chuẩn để mô tả cú pháp là <b>văn phạm phi ngữ cảnh</b></li>
          </ul>
        </section>

        <section>
          <h2>Văn phạm phi ngữ cảnh (CFG)</h2>
          <div class="question-box">
            <div class="question-title">Định nghĩa (4 thành phần)</div>
            <p class="mini" style="margin:0;">
              Một văn phạm phi ngữ cảnh là bộ bốn
              <span class="inline-code">G = (NT, T, R, S)</span>:
            </p>
            <ul class="mini" style="margin-top:0.4rem;">
              <li><b>T</b>: tập hữu hạn các ký hiệu kết thúc (terminal)</li>
              <li><b>NT</b>: tập hữu hạn các ký hiệu không kết thúc (non-terminal)</li>
              <li>
                <b>R</b>: tập các luật sinh dạng
                <span class="inline-code">V → w</span>,
                với <span class="inline-code">V ∈ NT</span> và
                <span class="inline-code">w ∈ (T ∪ NT)</span>
              </li>
              <li><b>S</b>: ký hiệu bắt đầu, <span class="inline-code">S ∈ NT</span></li>
            </ul>
          </div>
        </section>

        <section>
          <h2>Ví dụ CFG: Chuỗi đối xứng</h2>
          <div class="question-box">
            <div class="question-title">Ngữ Pháp</div>
            <ul class="mini">
              <li><b>T</b> = { a, b } &nbsp; (bảng chữ cái)</li>
              <li><b>NT</b> = { P } &nbsp; (P: palindrome)</li>
              <li><b>S</b> = P</li>
              <li>
                <b>R</b>:
                <pre><code>P → ε | a | b | aPa | bPb</code></pre>
              </li>
            </ul>
          </div>
          <ul class="mini">
            <li><b>Cơ sở</b>: <span class="inline-code">ε</span>, <span class="inline-code">a</span>, <span
                class="inline-code">b</span> là chuỗi đối xứng</li>
            <li><b>Đệ quy</b>: nếu <span class="inline-code">s</span> là chuỗi đối xứng thì
              <span class="inline-code">asa</span> và <span class="inline-code">bsb</span> cũng là chuỗi
              đối xứng
            </li>
          </ul>
        </section>

        <section>
          <h2>Backus–Naur Form (BNF)</h2>
          <ul class="mini">
            <li><span class="inline-code">::=</span> : ký hiệu định nghĩa (thay cho <span class="inline-code">→</span>)
            </li>
            <li><span class="inline-code">&lt;A&gt;</span> : ký hiệu không kết thúc (non-terminal)</li>
            <li>Ký hiệu kết thúc (terminal): viết trực tiếp, không đặt trong <span
                class="inline-code">&lt;...&gt;</span></li>
            <li><span class="inline-code">|</span> : lựa chọn giữa các vế phải</li>
          </ul>
          <pre><code>
                        &lt;E&gt; ::= &lt;I&gt;
                            | &lt;E&gt; + &lt;E&gt;
                            | &lt;E&gt; * &lt;E&gt;
                            | - &lt;E&gt;
                            | ( &lt;E&gt; )
                    </code></pre>
        </section>

        <section>
          <h2>Sơ đồ CFG</h2>
          <div style="display:grid;grid-template-columns:1fr 1fr;gap:1rem;font-size:0.9em;">
            <div class="box-gray">
              <b>Đầu vào</b><br />Chuỗi token / ký hiệu
            </div>
            <div class="box-gray">
              <b>Luật sinh P</b><br /><span class="inline-code">V → w</span>
            </div>
            <div class="box" style="grid-column:1/-1;">
              <b>Kết quả</b>: cây dẫn xuất (parse tree) hoặc báo lỗi
            </div>
          </div>
        </section>

        <section>
          <h2>Dẫn xuất (Derivation)</h2>
          <ul>
            <li><b>Dẫn xuất trực tiếp</b> <span class="inline-code">v ⇒ w</span>: thay 1 non-terminal bằng 1
              luật</li>
            <li><b>Dẫn xuất</b> <span class="inline-code">v ⇒* w</span>: chuỗi hữu hạn các bước</li>
            <li><b>Ngôn ngữ sinh</b>:
              <span class="inline-code">L(G) = { w ∈ T* | S ⇒* w }</span>
            </li>
          </ul>
        </section>

        <section>
          <h2>Ví dụ dẫn xuất</h2>
          <p>Chuỗi: <span class="inline-code">ab*(a+b)</span></p>
          <pre><code class="mini">E ⇒ E*E ⇒ I*E ⇒ ... ⇒ ab*(a+b)</code></pre>
          <ul class="mini">
            <li>Có thể dẫn xuất “trái nhất” hoặc “phải nhất”</li>
            <li>Dù thứ tự khác nhau, mục tiêu là tái hiện <b>cấu trúc</b> của chuỗi</li>
          </ul>
        </section>

        <section>
          <h2>Cây dẫn xuất (Parse tree)</h2>
          <ul>
            <li><b>Cây</b> biểu diễn cấu trúc lồng nhau của luật sinh</li>
            <li>Lá đọc trái→phải cho ra chuỗi terminal</li>
            <li>Hai dẫn xuất khác nhau có thể cho <b>cùng</b> một cây</li>
          </ul>
          <div class="question-box">
            <div class="question-title">Vì sao cây quan trọng?</div>
            <ul class="mini" style="margin-top:0.3rem;">
              <li>Chuỗi chỉ là ký tự; cây cho biết “gắn kết” và “nhóm” (grouping)</li>
              <li>Là nền tảng để xây AST, kiểm tra kiểu, sinh mã…</li>
            </ul>
          </div>
        </section>

        <section>
          <h2>Tính mơ hồ (Ambiguity)</h2>
          <p>Ví dụ chuỗi <span class="inline-code">a*b+a</span> có thể có 2 cây:</p>
          <ul>
            <li>(a*b)+a &nbsp; <span class="pill">nhân trước</span></li>
            <li>a*(b+a) &nbsp; <span class="pill">cộng trước</span></li>
          </ul>
          <div class="question-box">
            <div class="question-title">Định nghĩa</div>
            CFG <span class="keyword">mơ hồ</span> nếu tồn tại chuỗi trong <span class="inline-code">L(G)</span> có
            <b>&gt; 1</b> cây dẫn xuất.
          </div>
        </section>

        <section>
          <h2>Câu hỏi (Phần 1)</h2>
          <ol>
            <li>Vì sao CFG mơ hồ gây khó cho biên dịch?</li>
            <li>Khác nhau giữa <span class="inline-code">⇒</span> và <span class="inline-code">⇒*</span>?
            </li>
            <li>Cây dẫn xuất cho biết điều gì mà chuỗi không thể hiện?</li>
          </ol>
        </section>
      </section>

      <!-- ==========================================================
                2) BIÊN DỊCH, NGỮ DỤNG VÀ CÀI ĐẶT
            =========================================================== -->
      <section>
        <section>
          <h1>
            <span class="text-light">2.</span><br />
            Ngữ nghĩa và Cài đặt
          </h1>
        </section>

        <section>
          <h2>Biên dịch là gì?</h2>
          <ul>
            <li><b>Biên dịch</b>: chuyển chương trình từ ngôn ngữ nguồn sang ngôn ngữ đích (thường là mã
              trung gian/máy)</li>
            <li>Đầu ra thường là chương trình mới (có thể chạy nhiều lần)</li>
          </ul>
          <div class="question-box">
            <div class="question-title">Ý tưởng cốt lõi</div>
            Tách dịch (compile) khỏi chạy (execute) để tăng hiệu năng và tối ưu hóa.
          </div>
        </section>

        <section>
          <h2>2 giai đoạn trong biên dịch</h2>
          <div class="two-col">
            <div class="box">
              <b>Giai đoạn Phân tích</b>
              <ul class="mini">
                <li>Phân tích từ vựng</li>
                <li>Phân tích cú pháp</li>
                <li>Phân tích ngữ nghĩa tĩnh</li>
              </ul>
            </div>
            <div class="box">
              <b>Giai đoạn Tổng hợp</b>
              <ul class="mini">
                <li>Sinh mã trung gian</li>
                <li>Tối ưu hóa</li>
                <li>Sinh mã đích</li>
              </ul>
            </div>
          </div>
        </section>

        <section>
          <h2>Giai đoạn Phân tích</h2>
          <ul>
            <li><b>Phân tích từ vựng (Scaner/Lexer/Tokenizers)</b>: ký tự → từ cơ bản (id, num, keyword,
              operator...)</li>
            <li><b>Phân tích cú pháp (Parser)</b>: Các từ cơ bản → cây dẫn xuất</li>
            <li><b>Phân tích ngữ nghĩa tĩnh</b>: ràng buộc theo ngữ cảnh (khai báo, số tham số, kiểu...)
            </li>
          </ul>
          <div class="question-box">
            <div class="question-title">Các ràng buộc ngữ nghĩa tĩnh</div>
            <ul class="mini" style="margin-top:0.3rem;">
              <li>Biến phải khai báo trước khi dùng</li>
              <li>Khớp tham số khi gọi hàm</li>
              <li>Tương thích kiểu, ví dụ trong phép gán</li>
            </ul>
          </div>
        </section>

        <section>
          <h2>Giai đoạn Tổng hợp</h2>
          <ul>
            <li>
              <b>Sinh mã trung gian</b>:
              chuyển chương trình sang dạng biểu diễn trung gian,
              <i>không phụ thuộc kiến trúc máy</i>, thuận tiện cho phân tích và tối ưu
            </li>
            <li>
              <b>Tối ưu hoá</b>:
              cải thiện chương trình mà <i>không làm thay đổi ý nghĩa</i>,
              ví dụ loại bỏ mã không dùng, gom biểu thức lặp, tối ưu vòng lặp
            </li>
            <li>
              <b>Sinh mã đích</b>:
              chuyển mã trung gian thành mã cho máy cụ thể
              (chọn lệnh, gán thanh ghi, bố trí bộ nhớ)
            </li>
          </ul>
        </section>


        <section>
          <h2>Ngữ nghĩa động</h2>
          <ul>
            <li>Mô tả hành vi khi thực thi</li>
            <li>Thường mô hình hóa bằng <b>máy trừu tượng</b> và <b>chuyển trạng thái</b></li>
          </ul>
          <div class="question-box">
            <div class="question-title">Khái niệm cốt lõi</div>
            <span class="keyword">Trạng thái (State)</span> + <span class="keyword">Quy tắc chuyển
              (Transition)</span> ⇒ diễn tả từng bước thực thi.
          </div>
        </section>

        <section>
          <h2>Trạng thái (State)</h2>
          <ul>
            <li>Trạng thái <span class="inline-code">σ</span>: ánh xạ <span class="inline-code">Var →
                Value</span></li>
            <li>Cập nhật: <span class="inline-code">σ[X ← v]</span></li>
            <li>Tra cứu: <span class="inline-code">σ(X)</span></li>
          </ul>
          <pre><code class="mini">σ = [(X,3), (Y,5)]
σ[X←7] = [(X,7), (Y,5)]</code></pre>
        </section>

        <section>
          <h2>Cơ chế hoạt động: chuyển trạng thái</h2>
          <ul>
            <li>Dạng kết thúc: <span class="inline-code">⟨c, σ⟩ → τ</span></li>
            <li>Dạng từng bước: <span class="inline-code">⟨c, σ⟩ → ⟨c', σ'⟩</span></li>
            <li>Quy tắc suy diễn: “premise / conclusion” (dạng phân số)</li>
          </ul>
          <pre><code class="mini">(skip, σ) → σ
(X := n, σ) → σ[X←n]</code></pre>
        </section>

        <section>
          <h2>Ngữ dụng</h2>
          <ul>
            <li>Không phải đúng/sai, mà là <b>tốt/xấu</b> (phong cách, khả năng bảo trì)</li>
            <li>Gắn chặt với kỹ thuật phần mềm và cộng đồng người dùng</li>
          </ul>
          <div class="question-box">
            <div class="question-title">Tiêu chí đánh giá (gợi ý)</div>
            <ul class="mini" style="margin-top:0.3rem;">
              <li>Độ rõ ràng/đọc hiểu</li>
              <li>Khả năng bảo trì, kiểm thử</li>
              <li>Ít lỗi do nhầm lẫn</li>
              <li>Hiệu năng (khi cần), tính nhất quán phong cách</li>
            </ul>
          </div>
        </section>

        <section>
          <h2>Ví dụ ngữ dụng</h2>
          <div class="two-col">
            <div class="box-gray">
              <b>Ví dụ “xấu”</b>
              <pre><code class="mini">if (cond) goto L;
...
L: ...</code></pre>
              <p class="mini">Khó đọc, khó chứng minh tính đúng, khó bảo trì</p>
            </div>
            <div class="box-gray">
              <b>Ví dụ “tốt”</b>
              <pre><code class="mini">if (cond) {
  ...
} else {
  ...
}</code></pre>
              <p class="mini">Cấu trúc rõ ràng, dễ kiểm thử</p>
            </div>
          </div>
        </section>

        <section>
          <h2>Cài đặt (Implementation)</h2>
          <ul>
            <li><b>Máy trừu tượng</b>: cấu trúc dữ liệu + thuật toán để lưu trữ &amp; thực thi chương trình
            </li>
            <li><b>Hai chiến lược chính</b>:
              <ul>
                <li><b>Thông dịch</b> (interpretation)</li>
                <li><b>Biên dịch</b> (compilation)</li>
              </ul>
            </li>
            <li><b>Giải pháp lai</b>: bytecode + VM, runtime support…</li>
          </ul>
        </section>

        <section>
          <h2>Thông dịch vs Biên dịch</h2>
          <table>
            <thead>
              <tr>
                <th>Tiêu chí</th>
                <th>Thông dịch</th>
                <th>Biên dịch</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>Overhead</td>
                <td>Có giải mã lúc chạy</td>
                <td>Giải mã/lập kế hoạch trước</td>
              </tr>
              <tr>
                <td>Hiệu năng</td>
                <td>Thường thấp hơn</td>
                <td>Thường cao hơn</td>
              </tr>
              <tr>
                <td>Debug/REPL</td>
                <td>Dễ tương tác</td>
                <td>Cần thêm mapping/symbol</td>
              </tr>
              <tr>
                <td>Phổ biến</td>
                <td>Script/VM</td>
                <td>Hệ thống/hiệu năng</td>
              </tr>
            </tbody>
          </table>
        </section>
      </section>

      <!-- ==========================================================
                3) BIẾN, KHỐI VÀ MÔI TRƯỜNG
            =========================================================== -->
      <section>
        <section>
          <h1>
            <span class="text-light">3.</span><br />
            Tên, Đối tượng được biểu thị và Khối
          </h1>
        </section>

        <section>
          <h2>Tên và Đối tượng</h2>
          <ul>
            <li><b>Tên (Name)</b>: chuỗi ký tự dùng để chỉ một thực thể</li>
            <li><b>Đối tượng biểu thị (Denotable object)</b>: thứ mà tên “trỏ tới” (biến, hằng, hàm, kiểu,
              nhãn...)</li>
          </ul>
          <div class="question-box">
            <div class="question-title">Điểm mấu chốt</div>
            <span class="keyword">Tên ≠ Đối tượng</span>: một tên có thể che khuất tên khác; một đối tượng
            có thể có nhiều tên.
          </div>
        </section>

        <section>
          <h2>Ví dụ: Che khuất tên</h2>
          <pre><code class="mini">// Mã giả
int x = 10;
{
    int y = x + 1;
    int x = 99;   // che khuất x bên ngoài
    print(x, y);
}
print(x);</code></pre>
          <ul class="mini">
            <li>Trong khối trong: <span class="inline-code">x = 99</span>, <span class="inline-code">y =
                11</span></li>
            <li>Sau khi ra khối: <span class="inline-code">x = 10</span></li>
          </ul>
        </section>

        <!-- aliasing -->
        <section>
          <h2>Bí danh (Aliasing)</h2>
          <ul>
            <li>Nhiều tên cùng trỏ tới <b>một đối tượng</b> (ô nhớ)</li>
            <li>Xuất hiện trong: con trỏ, tham chiếu, tham số truyền theo tham chiếu</li>
          </ul>
          <div class="question-box">
            <div class="question-title">Hệ quả</div>
            Thay đổi qua một tên có thể ảnh hưởng đến giá trị nhìn thấy qua tên khác → khó suy luận, dễ lỗi.
          </div>
        </section>

        <section>
          <h2>Khối (Block)</h2>
          <div class="question-box">
            <div class="question-title">Định nghĩa</div>
            <span class="keyword">Khối</span> là vùng văn bản chương trình có ranh giới xác định,
            trong đó có thể xuất hiện các <b>khai báo cục bộ</b>.
          </div>
          <ul class="mini">
            <li>C / Java: <span class="inline-code">{ ... }</span></li>
            <li>Pascal: <span class="inline-code">begin ... end</span></li>
            <li>Python: khối xác định bằng thụt lề</li>
          </ul>
        </section>

        <section>
          <h2>Khối lồng nhau và che khuất</h2>
          <ul>
            <li>Khối có thể <b>lồng nhau</b> (nesting)</li>
            <li>Đóng/mở theo nguyên tắc <b>LIFO</b></li>
            <li>Khai báo trong khối trong có thể <b>che</b> khai báo cùng tên ở khối ngoài</li>
          </ul>
        </section>

        <section>
          <h2>Ví dụ Khối</h2>
          <pre><code class="mini">// Giả mã
int x = 1;
{
    int y = 2;
    {
        int x = 3;   // che khuất x bên ngoài
        print(x, y);
    }
    print(x, y);
}
print(x);</code></pre>
          <ul class="mini">
            <li>Khối trong cùng: <span class="inline-code">x = 3</span>, <span class="inline-code">y =
                2</span></li>
            <li>Khối giữa: <span class="inline-code">x = 1</span>, <span class="inline-code">y = 2</span>
            </li>
            <li>Ngoài mọi khối: <span class="inline-code">x = 1</span></li>
          </ul>
        </section>

        <section>
          <h2>Câu hỏi tổng hợp</h2>
          <ol>
            <li>Vì sao nói tên và đối tượng được biểu thị là hai khái niệm khác nhau?</li>
            <li>Cho một ví dụ trong đó một đối tượng có nhiều tên.</li>
            <li>Cho một ví dụ che khuất tên do khối lồng nhau.</li>
          </ol>
        </section>
      </section>

      <!-- ==========================================================
                4) MÔI TRƯỜNG VÀ PHẠM VI
            ========================================================== -->
      <section>
        <section>
          <h1>
            <span class="text-light">4.</span><br />
            Môi trường và Phạm vi
          </h1>
        </section>

        <section>
          <h2>Môi trường (Environment)</h2>
          <div class="question-box">
            <div class="question-title">Định nghĩa</div>
            <span class="keyword">Môi trường</span> tại một điểm chương trình và thời điểm thực thi
            là tập các liên kết <b>tên → đối tượng</b> đang có hiệu lực.
          </div>
          <div class="diagram-row" style="margin-top:1rem;">
            <div class="box">Tên</div>
            <div>→</div>
            <div class="box-gray">Môi trường</div>
            <div>→</div>
            <div class="box-red">Đối tượng</div>
          </div>
        </section>

        <section>
          <h2>Phân loại biến theo môi trường</h2>
          <div class="two-col">
            <div class="box-gray">
              <b>Cục bộ (Local)</b>
              <p class="mini">Khai báo trong khối hiện tại</p>
            </div>
            <div class="box-gray">
              <b>Phi cục bộ (Non-local)</b>
              <p class="mini">Nhìn thấy trong khối nhưng khai báo ở khối ngoài</p>
            </div>
          </div>
          <div class="box-gray" style="margin-top:1rem;">
            <b>Toàn cục (Global)</b>
            <p class="mini">Có thể truy cập ở mọi khối (mức chương trình / mô-đun)</p>
          </div>
        </section>

        <section>
          <h2>Phạm vi</h2>
          <ul>
            <li><b>Phạm vi của một khai báo</b>: phần chương trình nơi tên đó được coi là hiển thị</li>
            <li>Quy tắc xác định phạm vi gọi </li>
            <li>Hai dạng chính: Tĩnh (Static) và Động (Dynamic)</li>
          </ul>
        </section>

        <section>
          <h2>Phạm vi tĩnh</h2>
          <ul>
            <li>Liên kết tên–đối tượng phụ thuộc <b>cấu trúc văn bản</b></li>
            <li>Quy tắc: <b>nearest nested scope</b></li>
            <li>Có thể xác định tại <b>thời điểm biên dịch</b></li>
          </ul>
          <pre><code class="mini">int x = 0;
void fie() { 
    x = 1; 
}
B: { 
    int x; 
    fie(); 
}
write(x);
</code></pre>
        </section>

        <section>
          <h2>Ví dụ: Phạm vi tĩnh</h2>
          <pre><code class="mini">int x = 0;
void f() {
    print(x);
}
void g() {
    int x = 1;
    f();
}
g();</code></pre>
          <ul class="mini">
            <li><span class="inline-code">f</span> được định nghĩa ở mức toàn cục. Trong <span
                class="inline-code">f</span>, <span class="inline-code">x</span> luôn là <b>x
                toàn cục</b>. Kết quả in ra: <b>0</b></li>
          </ul>
          <div class="question-box">
            <div class="question-title">Nhận xét</div>
            Liên kết tên–đối tượng được quyết định bởi <b>vị trí định nghĩa trong mã nguồn</b>.
          </div>
        </section>

        <section>
          <h2>Phạm vi động</h2>
          <ul>
            <li>Liên kết phụ thuộc <b>thứ tự gọi/kích hoạt lúc chạy</b></li>
            <li>Tên trỏ tới liên kết “gần nhất theo thời gian” còn hiệu lực</li>
          </ul>
          <div class="question-box">
            <div class="question-title">Hệ quả</div>
            Hành vi chương trình phụ thuộc luồng gọi → khó đọc, khó dự đoán, khó tối ưu.
          </div>
        </section>

        <section>
          <h2>Ví dụ: Phạm vi động </h2>
          <pre><code class="mini">int x = 0;
void f() {
    print(x);
}
void g() {
    int x = 1;
    f();
}
g();</code></pre>
          <ul class="mini">
            <li>Khi <span class="inline-code">f</span> được gọi từ <span class="inline-code">g</span>. <span
                class="inline-code">x</span> gần nhất còn hiệu lực là <b>x của g</b>. Kết quả in ra:
              <b>1</b>
            </li>
          </ul>
          <div class="question-box">
            <div class="question-title">Nhận xét</div>
            Liên kết phụ thuộc <b>chuỗi gọi lúc chạy</b>, không chỉ mã nguồn.
          </div>
        </section>

        <section>
          <h2>So sánh Static và Dynamic Scope</h2>
          <table>
            <thead>
              <tr>
                <th>Tiêu chí</th>
                <th>Static</th>
                <th>Dynamic</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>Cơ sở xác định</td>
                <td>Cấu trúc văn bản</td>
                <td>Thứ tự gọi</td>
              </tr>
              <tr>
                <td>Thời điểm</td>
                <td>Biên dịch</td>
                <td>Runtime</td>
              </tr>
              <tr>
                <td>Dễ suy luận</td>
                <td>Cao</td>
                <td>Thấp</td>
              </tr>
              <tr>
                <td>Hiệu năng</td>
                <td>Tốt</td>
                <td>Kém hơn</td>
              </tr>
            </tbody>
          </table>
        </section>

        <section>
          <h2>Tại sao phạm vi tĩnh phổ biến?</h2>
          <ul>
            <li>Dễ đọc và kiểm chứng chương trình</li>
            <li>Hỗ trợ tối ưu và phân tích tĩnh</li>
            <li>Phù hợp với lập trình mô-đun và tái sử dụng</li>
            <li>Hạn chế các hành vi “bất ngờ” khi chạy</li>
          </ul>
        </section>
      </section>

      <!-- =========================
                KẾT BUỔI HỌC – TỔNG KẾT
            ========================= -->
      <section>
        <section style="font-size:0.9em;">
          <h2>Tổng kết buổi học</h2>
          <ul>
            <li>
              <b>Mô tả ngôn ngữ lập trình</b>:
              cách đặc tả hình thức một ngôn ngữ bằng từ vựng, cú pháp, ngữ pháp (CFG, BNF).
            </li>
            <li>
              <b>Ngữ nghĩa và Cài đặt</b>:
              cách chương trình được hiểu và thực thi thông qua ngữ nghĩa tĩnh/động,
              biên dịch và máy trừu tượng.
            </li>
            <li>
              <b>Tên, Đối tượng được định danh và Khối</b>:
              cơ chế gắn tên với đối tượng,
              khối tạo ra phạm vi cục bộ và hiện tượng che khuất, bí danh.
            </li>
            <li>
              <b>Môi trường và Phạm vi</b>:
              cách môi trường duy trì liên kết tên–đối tượng,
              và cách static/dynamic scope quyết định liên kết khi thực thi.
            </li>
          </ul>
        </section>

        <section>
          <h2>Thông điệp chính</h2>
          <div class="question-box">
            <ul class="mini" style="margin:0.3rem 0 0 1rem;">
              <li>Cú pháp quyết định <b>chương trình nào hợp lệ</b></li>
              <li>Ngữ nghĩa quyết định <b>chương trình làm gì</b></li>
              <li>Khối và môi trường quyết định <b>tên trỏ tới đâu</b></li>
              <li>Phạm vi tĩnh giúp chương trình

                <div class="footer">
                  Phương pháp luận lập trình (Học kỳ 2 2025-2026) §2a: Cú pháp, ngữ nghĩa, tên và phạm
                  vi
                </div>
          </div>
    </div>

    <script src="revealjs/dist/reveal.js"></script>
    <script src="plugin/notes/notes.js"></script>
    <script src="plugin/markdown/markdown.js"></script>
    <script src="plugin/highlight/highlight.js"></script>
    <script src="plugin/math/math.js"></script>
    <script>
      Reveal.initialize({
        controlsLayout: "edges",
        slideNumber: true,
        hashOneBasedIndex: true,
        hash: true,
        plugins: [RevealMarkdown, RevealHighlight, RevealNotes, RevealMath.KaTeX],
      });
    </script>
</body>

</html>